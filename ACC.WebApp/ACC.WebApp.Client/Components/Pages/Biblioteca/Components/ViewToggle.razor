@* ViewToggle.razor *@
@using ACC.Shared.Core
@using ACC.Shared.Enums
@rendermode InteractiveServer
<div class="biblioteca-view-toggle">
    @foreach (var tipo in TiposRapidos)
    {
        <button class="biblioteca-toggle-btn @(Filtros.Tipos.Contains(tipo) ? "active" : null)"
                @onclick="() => CambiarFiltro(tipo)">
            @tipo
        </button>
    }
</div>

@code {
    [Parameter, EditorRequired] public BibliotecaFiltros Filtros { get; set; } = default!;
    [Parameter] public EventCallback<BibliotecaFiltros> OnFiltrosCambiados { get; set; }

    // Filtros rapidos
    private static readonly TipoContenidoCapitulo[] TiposRapidos =
        [
        TipoContenidoCapitulo.Documentacion,
        TipoContenidoCapitulo.Concepto,
        TipoContenidoCapitulo.Ejemplo,
        TipoContenidoCapitulo.Ejercicio,
        TipoContenidoCapitulo.Proyecto
        ];

    private async Task CambiarFiltro(TipoContenidoCapitulo tipo)
    {
        var nuevo = Filtros.Clone();

        if (!nuevo.Tipos.Add(tipo))
            nuevo.Tipos.Remove(tipo);

        await OnFiltrosCambiados.InvokeAsync(nuevo); 
    }
}